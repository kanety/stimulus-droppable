import{Controller as e}from"@hotwired/stimulus";import"@kanety/stimulus-static-actions";class t extends e{get draggers(){return this.scope.findAllElements('[draggable="true"]')}start(e){this.currentDrag=this.draggers.find(t=>t.contains(e.target)),this.currentDrag&&(this.toggleClass(!0),this.showHelper(e.pageX,e.pageY),this.dispatch("start",{detail:{dataTransfer:e.dataTransfer,drag:this.currentDrag}}),this.context.actionSet.add(this.constructor.dragActions))}enter(e){var t=this.findCurrentDrop(e.target);t&&(this.toggleOverClass(t,!0),this.dispatch("enter",{detail:{dataTransfer:e.dataTransfer,drag:this.currentDrag,drop:t}})),e.preventDefault()}over(e){var t=this.findCurrentDrop(e.target);t&&this.dispatch("over",{detail:{dataTransfer:e.dataTransfer,drag:this.currentDrag,drop:t}}),e.preventDefault()}leave(e){var t=this.findCurrentDrop(e.target);t&&(this.toggleOverClass(t,!1),this.dispatch("leave",{detail:{dataTransfer:e.dataTransfer,drag:this.currentDrag,drop:t}}))}drag(e){this.moveHelper(e.pageX,e.pageY),this.dispatch("drag",{detail:{dataTransfer:e.dataTransfer,drag:this.currentDrag}})}drop(e){var t=this.findCurrentDrop(e.target);t&&this.dispatch("drop",{detail:{dataTransfer:e.dataTransfer,drag:this.currentDrag,drop:t}})}end(e){this.toggleClass(!1),this.hideHelper(),this.dispatch("end",{detail:{dataTransfer:e.dataTransfer,drag:this.currentDrag}}),this.context.actionSet.remove(this.constructor.dragActions)}findCurrentDrop(e){return this.dropTargets.find(t=>t.contains(e))}toggleClass(e){this.dropTargets.forEach(e?e=>{e.classList.add("st-droppable__drop--ok")}:e=>{e.classList.remove("st-droppable__drop--ok"),e.classList.remove("st-droppable__drop--over")})}toggleOverClass(e,t){t?e.classList.add("st-droppable__drop--over"):e.classList.remove("st-droppable__drop--over")}showHelper(e,t){this.hasHelperTarget&&(this.helperTarget.style.display="",this.moveHelper(e,t))}moveHelper(e,t){this.hasHelperTarget&&e&&t&&(this.helperTarget.style.top=t+10+"px",this.helperTarget.style.left=e+"px")}hideHelper(){this.hasHelperTarget&&(this.helperTarget.style.display="none")}}t.targets=["drop","helper"],t.actions=[["element","dragstart@document->start"]],t.dragActions=[["element","dragenter@document->enter"],["element","dragover@document->over"],["element","dragleave@document->leave"],["element","drag@document->drag"],["element","drop@document->drop"],["element","dragend@document->end"]];export{t as default};
//# sourceMappingURL=index.module.js.map
